(this.webpackJsonpstokk=this.webpackJsonpstokk||[]).push([[0],{145:function(e,t,a){"use strict";a.r(t);var n,r=a(2),o=a(0),c=a(63),i=a.n(c),s=a(197),l=a(4),d=a(195),u=a(204),j=a(196),h=a(166),b=a(162),O=a(165),f=a(167),x=a(168),p=a(202),g=a(198),m=a(72),S=a(30),v=a.n(S),y=a(56),k=a(161),w=a(163),D=a(69),T=a(17),E=a(47),_=a(205);!function(e){e.SYMBOL="1. symbol",e.NAME="2. name"}(n||(n={}));var A=function(e){var t=e.query,a=e.setQuery,c=e.closeModal,i=e.setShouldFetchDailyStockTimeSeries,s=o.useState(),d=Object(l.a)(s,2),u=d[0],j=d[1],h=o.useState(),O=Object(l.a)(h,2),f=O[0],x=O[1],g=o.useState(!1),m=Object(l.a)(g,2),S=m[0],A=m[1],I=o.useState(!1),R=Object(l.a)(I,2),C=R[0],L=R[1];function M(){return(M=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i(!0),c();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(y.a)(v.a.mark((function e(){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""===t){e.next=12;break}return A(!0),a=Object({NODE_ENV:"production",PUBLIC_URL:"/stokk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALPHA_VANTAGE_API_KEY,e.next=6,fetch("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=".concat(t.toLowerCase(),"&apikey=").concat(a));case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,j(z(r)),A(!1);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function z(e){return e.bestMatches.map((function(e){return"".concat(e[n.SYMBOL]," - ").concat(e[n.NAME])}))}return Object(r.jsx)(T.a.form,{onSubmit:function(e){return M.apply(this,arguments)},autoComplete:"off",flex:"0 0 25%",position:"relative",zIndex:D.b.zIndices.dropdown,children:Object(r.jsxs)(k.b,{spacing:3,children:[Object(r.jsxs)(k.b,{spacing:0,children:[Object(r.jsxs)(E.a,{mb:2,children:[Object(r.jsx)(_.a,{ref:e.inputRef,name:"query",type:"text",placeholder:"e.g. GOOGL/Google",required:!0,onChange:function(e){f&&clearTimeout(f),a(e.target.value),L(!1),x(setTimeout((function(){return function(){return F.apply(this,arguments)}()}),500))},value:t,variant:"flushed"}),Object(r.jsx)(E.b,{children:"Type the name of a stock symbol/company & click on any of the suggestions"})]}),""!==t&&u&&(null===u||void 0===u?void 0:u.length)>0?Object(r.jsx)(k.c,{alignItems:"start",maxHeight:"10em",overflowY:"auto",children:Object(r.jsx)(b.a,{w:"100%",children:Object(r.jsx)(w.a,{initialScale:.9,in:u.length>0,children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(r.jsx)(b.a,{as:"p",onClick:function(){L(!0),a(e.split(" - ")[0])},borderBottom:"1px solid transparent",cursor:"pointer",_hover:{borderBottomColor:D.b.colors.gray[100]},children:e},t)}))})})}):null]}),Object(r.jsx)(p.a,{type:"submit",disabled:!C,isLoading:S,children:"Load stock data for selected company"})]})})};var I,R,C,L=function(e){var t=e.query,a=e.setQuery,n=e.setShouldFetchDailyStockTimeSeries,c=o.useRef(null),i=Object(O.a)(),s=i.isOpen,l=i.onOpen,d=i.onClose,u=i.onToggle;return Object(r.jsxs)(h.a,{as:"header",p:5,fontSize:"2xl",direction:"column",alignItems:"center",children:[Object(r.jsxs)(f.a,{as:"h1",size:"lg",mb:4,children:[Object(r.jsxs)(x.a,{borderTopRightRadius:0,borderBottomRightRadius:0,display:"inline-flex",alignItems:"center",colorScheme:"red",fontSize:"inherit",lineHeight:"short",children:[Object(r.jsx)(m.a,{}),Object(r.jsx)(b.a,{as:"span",marginLeft:"2",children:"st"})]}),Object(r.jsxs)(x.a,{borderTopLeftRadius:0,borderBottomLeftRadius:0,display:"inline-flex",alignItems:"center",colorScheme:"green",fontSize:"inherit",lineHeight:"short",children:[Object(r.jsx)(b.a,{as:"span",marginRight:2,children:"okk"}),Object(r.jsx)(m.b,{})]})]}),Object(r.jsx)(p.a,{variant:"outline",size:"md",colorScheme:"blue",onClick:l,fontSize:"xl",rightIcon:Object(r.jsx)(m.c,{}),children:"Search"}),Object(r.jsxs)(g.a,{onClose:d,size:"xl",isOpen:s,motionPreset:"scale",initialFocusRef:c,children:[Object(r.jsx)(g.f,{}),Object(r.jsxs)(g.d,{children:[Object(r.jsx)(g.e,{children:"Search for a stock symbol/company name"}),Object(r.jsx)(g.c,{}),Object(r.jsx)(g.b,{children:Object(r.jsx)(A,{inputRef:c,query:t,setQuery:a,closeModal:u,setShouldFetchDailyStockTimeSeries:n})})]})]})]})},M=a(194),F=a(44),z=a(185),H=a(200),P=a(199),W=a(186),B=a(187),q=a(188),N=a(190),G=a(191),Y=a(192),K=a(189),U=a(201),V=a(175),Q=a(176),J=a(183),$=a(184),X=a(78),Z=a(207);function ee(e){var t=Object.entries(e[R.TIME_SERIES_DAILY]);if(t)return t.map((function(e){var t=Number.parseFloat(e[1][I.HIGH]),a=Number.parseFloat(e[1][I.LOW]),n=+((t+a)/2).toFixed(3);return{date:e[0],values:{high:t,low:a,average:n}}})).sort((function(e,t){return e.date>t.date?1:-1}));throw new Error("There is no data for the selected company \ud83d\ude15")}!function(e){e.HIGH="2. high",e.LOW="3. low"}(I||(I={})),function(e){e.TIME_SERIES_DAILY="Time Series (Daily)"}(R||(R={})),function(e){e.HIGH="high",e.LOW="low",e.AVERAGE="average"}(C||(C={}));var te=function(e){return new Date(e.date)},ae=function(e){return e.values.high},ne=function(e){return e.values.average},re=Object(X.a)((function(e){return new Date(e.date)})).left,oe=Object(Z.a)("%b %d, '%y"),ce={light:"#edffea",dark:"#75daad"},ie={dark:"#3b6978",darker:"#204051"},se=Object(F.a)(Object(F.a)({},V.b),{},{background:ie.dark,border:"1px solid white",color:"white"}),le=Object(F.a)(Object(F.a)({},se),{},{background:D.b.colors.orange[500]});var de=function(e){var t=e.stockTimeSeries,a=e.showAverage,n=e.width,c=e.height,i=e.margin,s=Object(Q.a)(),l=s.showTooltip,d=s.hideTooltip,u=s.tooltipData,j=s.tooltipLeft,h=s.tooltipTop,O=i?n-i.left-i.right:n,f=i?c-i.top-i.bottom:c,x=o.useMemo((function(){return Object(H.a)({range:[0,O],domain:Object(J.a)(t,te)})}),[O,t]),p=o.useMemo((function(){return Object(P.a)({range:[f,0],domain:[0,(Object($.a)(t,ae)||0)+f/3],nice:!0})}),[f,t]),g=o.useCallback((function(e){var a=(Object(U.a)(e)||{x:0}).x,n=x.invert(a),r=re(t,n,1),o=t[r-1],c=t[r],i=o;c&&te(c)&&(i=n.valueOf()-te(o).valueOf()>te(c).valueOf()-n.valueOf()?c:o),l({tooltipData:i,tooltipLeft:a,tooltipTop:p(ae(i))})}),[l,p,x,t]);return Object(r.jsxs)(b.a,{position:"relative",children:[Object(r.jsxs)("svg",{width:n,height:c,children:[Object(r.jsx)("rect",{x:0,y:0,width:n,height:c,fill:"url(#area-background-gradient)",rx:14}),Object(r.jsx)(z.a,{id:"area-background-gradient",from:ie.dark,to:ie.darker}),Object(r.jsx)(z.a,{id:"area-gradient",from:ce.light,to:ce.light,toOpacity:.1}),Object(r.jsx)(W.a,{scale:p,width:O,strokeDasharray:"3,3",stroke:ce.light,strokeOpacity:.3,pointerEvents:"none"}),Object(r.jsx)(B.a,{scale:x,height:f,strokeDasharray:"3,3",stroke:ce.light,strokeOpacity:.3,pointerEvents:"none"}),Object(r.jsx)(q.a,{data:t,x:function(e){return x(te(e))},y:function(e){return p(ae(e))},yScale:p,strokeWidth:1,stroke:"url(#area-gradient)",fill:"url(#area-gradient)",curve:K.a}),a&&Object(r.jsx)(N.a,{stroke:D.b.colors.orange[500],strokeWidth:1.5,data:t,x:function(e){return x(te(e))},y:function(e){return p(ne(e))},curve:K.a}),Object(r.jsx)(G.a,{x:0,y:0,width:n,height:c,fill:"transparent",rx:14,onMouseMove:g,onMouseLeave:function(){return d()}}),u&&h&&Object(r.jsxs)("g",{children:[Object(r.jsx)(Y.a,{from:{x:j,y:0},to:{x:j,y:f},stroke:ce.dark,strokeWidth:2,pointerEvents:"none",strokeDasharray:"5,2"}),Object(r.jsx)("circle",{cx:j,cy:h+1,r:4,fill:"black",fillOpacity:.1,stroke:"black",strokeOpacity:.1,strokeWidth:2,pointerEvents:"none"}),Object(r.jsx)("circle",{cx:j,cy:h,r:4,fill:ce.dark,stroke:"white",strokeWidth:2,pointerEvents:"none"})]})]}),u&&h&&j&&Object(r.jsxs)("div",{children:[Object(r.jsx)(V.a,{top:h-12,left:j+12,style:se,children:"$".concat(ae(u))}),a&&Object(r.jsxs)(V.a,{top:h+25,left:j+12,style:le,children:["Average: ","$".concat(ne(u))]}),Object(r.jsx)(V.a,{top:f+15,left:j,style:Object(F.a)(Object(F.a)({},V.b),{},{minWidth:72,textAlign:"center",transform:"translateX(-50%)"}),children:oe(te(u))})]})]})},ue=a(193),je=a(206),he=a(108),be=Object(T.a)(he.DateRange),Oe=function(e){var t=e.setFilterInterval,a=e.setShowAverage,n=e.minDate,c=e.maxDate,i=o.useState([{key:"selection",startDate:void 0,endDate:void 0}]),s=Object(l.a)(i,2),d=s[0],u=s[1];return Object(r.jsxs)(k.b,{spacing:3,gridColumn:"3 / span 1",children:[Object(r.jsxs)(E.a,{children:[Object(r.jsx)(ue.a,{fontSize:"lg",children:"Date interval for stock time series"}),Object(r.jsx)(be,{minDate:new Date(n),maxDate:new Date(c),startDatePlaceholder:"Start date",endDatePlaceholder:"End date",ranges:d,moveRangeOnFirstSelection:!1,weekStartsOn:1,dateDisplayFormat:"d MMM, yyyy",onChange:function(e){u([e.selection])},w:"100%"}),Object(r.jsx)(E.b,{fontSize:"md",children:"Select start & end dates in order to filter the stock data"})]}),Object(r.jsxs)(E.a,{display:"flex",alignItems:"center",children:[Object(r.jsx)(ue.a,{htmlFor:"average-stock-value",mb:"0",children:"Show average stock value"}),Object(r.jsx)(je.a,{id:"average-stock-value",onChange:function(e){a(e.target.checked)}})]}),Object(r.jsx)(p.a,{type:"submit",colorScheme:"blue",variant:"outline",onClick:function(){t({start:d[0].startDate,end:d[0].endDate})},children:"Filter"})]})},fe=a(203);var xe=function(){return Object(r.jsxs)(k.b,{gridColumn:"2 / span 2",gridRow:"1 / -1",justifySelf:"center",alignSelf:"center",children:[Object(r.jsx)(b.a,{as:"p",children:"Loading company data..."}),Object(r.jsx)(fe.a,{isIndeterminate:!0,size:"3xs",color:D.b.colors.teal[500]})]})};var pe=function(e){var t=e.query,a=e.shouldFetchDailyStockTimeSeries,n=e.setShouldFetchDailyStockTimeSeries,c=o.useState(),i=Object(l.a)(c,2),s=i[0],d=i[1],u=o.useState(!1),j=Object(l.a)(u,2),h=j[0],b=j[1],O=o.useState(),f=Object(l.a)(O,2),x=f[0],p=f[1],g=o.useState(),m=Object(l.a)(g,2),S=m[0],w=m[1],D=o.useState(""),E=Object(l.a)(D,2),_=E[0],A=E[1],I=o.useState(""),R=Object(l.a)(I,2),C=R[0],L=R[1],F=o.useState(!1),z=Object(l.a)(F,2),H=z[0],P=z[1];return o.useEffect((function(){function e(){return(e=Object(y.a)(v.a.mark((function e(){var a,r,o,c,i,s,u,j;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),a=Object({NODE_ENV:"production",PUBLIC_URL:"/stokk",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ALPHA_VANTAGE_API_KEY,e.next=5,fetch("https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=".concat(t,"&outputsize=full&apikey=").concat(a));case 5:return r=e.sent,e.next=8,r.json();case 8:if(!(o=e.sent)){e.next=19;break}c=ee(o),i=Object(J.a)(c,(function(e){return e.date})),s=Object(l.a)(i,2),u=s[0],j=s[1],A(u),L(j),d(c),n(!1),P(!1),e.next=20;break;case 19:throw new Error("There is no data for the selected company \ud83d\ude15");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})))).apply(this,arguments)}a&&function(){e.apply(this,arguments)}()}),[a]),o.useLayoutEffect((function(){if((null===S||void 0===S?void 0:S.start)&&(null===S||void 0===S?void 0:S.end)&&s){var e=function(e,t){var a=t.start.toISOString().split("T")[0],n=t.end.toISOString().split("T")[0];return e.filter((function(e){return e.date>=a&&e.date<=n}))}(s,S);p(e)}}),[S,s]),H?Object(r.jsx)(xe,{}):s?Object(r.jsxs)(k.a,{spacing:"10em",children:[Object(r.jsxs)(k.b,{spacing:3,gridColumn:"2 / span 1",children:[Object(r.jsxs)(T.a.p,{children:["Stock data available between"," ",Object(r.jsx)(M.a,{size:"lg",variant:"solid",fontSize:"md",children:Object(r.jsx)(M.b,{children:_})})," ","and"," ",Object(r.jsx)(M.a,{size:"lg",variant:"solid",fontSize:"md",children:Object(r.jsx)(M.b,{children:C})})]}),Object(r.jsx)(de,{width:800,height:480,stockTimeSeries:null!==x&&void 0!==x?x:s,showAverage:h})]}),Object(r.jsx)(Oe,{minDate:_,maxDate:C,setFilterInterval:w,setShowAverage:b})]}):Object(r.jsx)(T.a.p,{gridColumn:"2 / -2",gridRow:"1 / span 3",fontSize:"3xl",display:"flex",justifyContent:"center",alignItems:"center",children:"Search for a company to load its stock data. Afterwards you can filter it using the calendar."})},ge=Object(d.a)({initialColorMode:"dark",styles:{global:{"html, body, #root":{height:"100%"},".rdrMonth":{alignSelf:"center"}}}});function me(){var e=o.useState(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=o.useState(!1),i=Object(l.a)(c,2),s=i[0],d=i[1];return Object(r.jsx)(u.a,{theme:ge,children:Object(r.jsxs)(j.a,{h:"100%",templateRows:"auto 1fr auto",children:[Object(r.jsx)(L,{query:a,setQuery:n,setShouldFetchDailyStockTimeSeries:d}),Object(r.jsx)(h.a,{as:"main",fontSize:"xl",justifyContent:"center",alignItems:"center",children:Object(r.jsx)(pe,{query:a,shouldFetchDailyStockTimeSeries:s,setShouldFetchDailyStockTimeSeries:d})}),Object(r.jsx)(b.a,{as:"footer",p:5,fontSize:"xl",textAlign:"center",children:Object(r.jsxs)("p",{children:["Made with"," ",Object(r.jsx)("span",{role:"img","aria-labelledby":"Heart",children:"\ud83d\udc96"})," ","by R\u0103zvan Sb\xeengu"]})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(143),a(144);i.a.render(Object(r.jsxs)(o.StrictMode,{children:[Object(r.jsx)(s.a,{initialColorMode:"dark"}),Object(r.jsx)(me,{})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.712dc70e.chunk.js.map